---
// Simplified Updates component with embedded content
---

<section class="updates-section">
	<div class="container">
		<h2 class="updates-title" id="updates-title">Novedades</h2>
		<div id="updates-content" class="updates-content">
			<div id="updates-markdown-content">
				<!-- Content will be rendered by JavaScript -->
			</div>
		</div>
	</div>
</section>

<script is:inline>
	document.addEventListener('DOMContentLoaded', function() {
		const translations = {
			es: {
				mainTitle: 'Novedades',
				content: `# Actualizaciones del Caso de Grisha

## Julio 7, 2025

Hemos iniciado la campaña de recaudación de fondos para ayudar a Grisha en su tratamiento médico. 

### Estado Actual
- Grisha está recibiendo tratamiento médico especializado
- La familia necesita apoyo para cubrir los costos médicos
- Cada donación es muy importante para su recuperación

### Próximos Pasos
- Continuar con el tratamiento médico
- Mantener actualizada la información del caso
- Agradecer a todos los donantes por su apoyo

---

*Gracias por tu solidaridad y apoyo. Cada donación hace una diferencia real en la vida de Grisha.*

---

## Agosto 3, 2024

Este domingo, 3 de agosto, se realizará un festival de recaudación de fondos denominado "El Festival por la Vida de Grisha". El objetivo de este evento es recaudar fondos para apoyar el tratamiento médico de Grisha. Pueden encontrar más detalles y actualizaciones en el siguiente enlace de Instagram: [https://www.instagram.com/reel/DMdXOdjxG2p/?utm_source=ig_web_copy_link](https://www.instagram.com/reel/DMdXOdjxG2p/?utm_source=ig_web_copy_link)`
			},
			en: {
				mainTitle: 'Updates',
				content: `# Grisha's Case Updates

## July 7, 2025

We have started the fundraising campaign to help Grisha with his medical treatment. 

### Current Status
- Grisha is receiving specialized medical treatment
- The family needs support to cover medical costs
- Every donation is very important for his recovery

### Next Steps
- Continue with medical treatment
- Keep case information updated
- Thank all donors for their support

---

## August 3, 2024

This Sunday, August 3rd, a fundraising festival named "The Festival for Grisha's Life" will be held. The goal of this event is to raise funds to support Grisha's medical treatment. You can find more details and updates on the following Instagram link: [https://www.instagram.com/reel/DMdXOdjxG2p/?utm_source=ig_web_copy_link](https://www.instagram.com/reel/DMdXOdjxG2p/?utm_source=ig_web_copy_link)

---

*Thank you for your solidarity and support. Every donation makes a real difference in Grisha's life.*`
			}
		};

		function getCurrentLang() {
			return localStorage.getItem('selectedLanguage') || (navigator.language.startsWith('es') ? 'es' : 'en');
		}

		function renderUpdates(lang) {
			const titleElement = document.getElementById('updates-title');
			const contentElement = document.getElementById('updates-markdown-content');
			
			if (titleElement && contentElement) {
				const currentLang = translations[lang] || translations.es;
				titleElement.textContent = currentLang.mainTitle;
				
				// Simple markdown rendering (basic)
				let content = currentLang.content;
				
				// Convert markdown to HTML
				content = content
					.replace(/^# (.*$)/gim, '<h1>$1</h1>')
					.replace(/^## (.*$)/gim, '<h2>$1</h2>')
					.replace(/^### (.*$)/gim, '<h3>$1</h3>')
					.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
					.replace(/\*(.*?)\*/g, '<em>$1</em>')
					.replace(/^- (.*$)/gim, '<li>$1</li>')
					.replace(/\n\n/g, '</p><p>')
					.replace(/^<p>/, '')
					.replace(/<\/p>$/, '');
				
				// Wrap in paragraphs
				content = '<p>' + content + '</p>';
				
				// Handle lists
				content = content.replace(/<li>(.*?)<\/li>/g, '<ul><li>$1</li></ul>');
				content = content.replace(/<\/ul>\s*<ul>/g, '');
				
				// Handle links
				content = content.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
				
				// Handle horizontal rules
				content = content.replace(/^---$/gm, '<hr>');
				
				contentElement.innerHTML = content;
			}
		}

		// Initial render
		let currentLang = getCurrentLang();
		renderUpdates(currentLang);

		// Listen for language changes
		document.querySelectorAll('.lang-btn').forEach(btn => {
			btn.addEventListener('click', function() {
				const lang = this.getAttribute('data-lang');
				localStorage.setItem('selectedLanguage', lang);
				renderUpdates(lang);
			});
		});

		// MutationObserver for other language changes
		const observer = new MutationObserver((mutations) => {
			let langChanged = false;
			mutations.forEach(mutation => {
				if (mutation.type === 'attributes' && mutation.attributeName === 'data-lang') {
					langChanged = true;
				}
			});
			if (langChanged) {
				const newLang = getCurrentLang();
				if (newLang !== currentLang) {
					currentLang = newLang;
					renderUpdates(currentLang);
				}
			}
		});

		observer.observe(document.body, { subtree: true, attributes: true });
	});
</script>

<style>
	.updates-section {
		background: #f5f7fa;
		padding: 3rem 0 2rem 0;
		margin-top: 2rem;
		border-top: 2px solid #e0e0e0;
	}
	.updates-title {
		text-align: center;
		color: #2c3e50;
		font-size: 2rem;
		margin-bottom: 1.5rem;
		font-weight: 700;
	}
	.updates-content {
		max-width: 800px;
		margin: 0 auto;
		font-size: 1.1rem;
		line-height: 1.7;
		color: #34495e;
		background: #fff;
		border-radius: 12px;
		box-shadow: 0 2px 10px rgba(44,62,80,0.06);
		padding: 2rem 1.5rem;
		min-height: 80px;
	}

	/* Estilos para el markdown renderizado */
	.updates-content h1 {
		color: #2c3e50;
		font-size: 1.8rem;
		margin-bottom: 1rem;
		font-weight: 700;
	}

	.updates-content h2 {
		color: #34495e;
		font-size: 1.4rem;
		margin: 1.5rem 0 0.8rem 0;
		font-weight: 600;
	}

	.updates-content h3 {
		color: #2c3e50;
		font-size: 1.4rem;
		margin-bottom: 1rem;
		font-weight: 600;
	}

	.updates-content ul {
		margin: 0.8rem 0;
		padding-left: 1.5rem;
	}

	.updates-content li {
		margin: 0.3rem 0;
	}

	.updates-content p {
		margin: 0.8rem 0;
	}

	.updates-content strong {
		color: #34495e;
		font-weight: 600;
	}

	.updates-content em {
		font-style: italic;
		color: #7f8c8d;
	}

	.updates-content hr {
		border: none;
		border-top: 1px solid #e0e0e0;
		margin: 1.5rem 0;
	}

	.updates-content a {
		color: #3498db;
		text-decoration: none;
		font-weight: 500;
	}

	.updates-content a:hover {
		text-decoration: underline;
	}

	/* Mejoras para tablets */
	@media (max-width: 1024px) {
		.updates-content {
			max-width: 90%;
			padding: 1.8rem 1.3rem;
		}
	}

	/* Mejoras para móviles */
	@media (max-width: 768px) {
		.updates-section {
			padding: 2rem 0 1.5rem 0;
		}
		
		.updates-title {
			font-size: 1.8rem;
			margin-bottom: 1.2rem;
		}
		
		.updates-content {
			max-width: 95%;
			padding: 1.5rem 1rem;
			font-size: 1rem;
			line-height: 1.6;
		}

		.updates-content h1 {
			font-size: 1.6rem;
		}

		.updates-content h2 {
			font-size: 1.3rem;
			margin: 1.3rem 0 0.7rem 0;
		}

		.updates-content h3 {
			font-size: 1.3rem;
		}

		.updates-content ul {
			padding-left: 1.2rem;
		}
	}

	/* Mejoras para móviles pequeños */
	@media (max-width: 480px) {
		.updates-section {
			padding: 1.5rem 0 1rem 0;
		}
		
		.updates-title {
			font-size: 1.6rem;
			margin-bottom: 1rem;
		}
		
		.updates-content {
			max-width: 98%;
			padding: 1.2rem 0.8rem;
			font-size: 0.95rem;
			line-height: 1.5;
		}

		.updates-content h1 {
			font-size: 1.4rem;
		}

		.updates-content h2 {
			font-size: 1.2rem;
			margin: 1.2rem 0 0.6rem 0;
		}

		.updates-content h3 {
			font-size: 1.2rem;
		}

		.updates-content ul {
			padding-left: 1rem;
		}
	}
</style>
